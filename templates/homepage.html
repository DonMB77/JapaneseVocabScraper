{% extends 'base.html' %}

{% block head %}
<link rel="stylesheet" href="../static/style.css">
{% endblock %}

{% block body %}
{% if words|length == 0 %}
<div class="input-group mb-3">
    <form action="/" method="POST">
        <input type="text" name="url" class="form-control" placeholder="Input URL" aria-label="Recipient's username"
            aria-describedby="button-addon2">
        <button class="btn btn-outline-secondary" type="submit" id="button-addon2">Submit</button>
    </form>
</div>
{% endif %}
<div>
    <h1>Fetched Vocabulary</h1>
    {% if words|length > 0 %}
    <table class="table table-bordered">
        <tr>
            <td>Reading</td>
            <td>Furigana</td>
            <td>Word Type</td>
            <td>Translation</td>
            <td>Save Button</td>
        </tr>
        {% for item in words %}
        <tr>
            <td>{{ item.readingJapanese }}</td>
            <td>{{ item.furigana }}</td>
            <td>{{ item.wordType }}</td>
            <td>{{ item.translation }}</td>
            <td>
                <form method="post" action="/save_vocab" style="display:inline;">
                    <input type="hidden" name="readingJapanese" value="{{ item.readingJapanese }}">
                    <input type="hidden" name="furigana" value="{{ item.furigana }}">
                    <input type="hidden" name="wordType" value="{{ item.wordType }}">
                    <input type="hidden" name="translation" value="{{ item.translation }}">
                    <input type="hidden" name="page" value="{{ request.args.get('page', 0) }}">
                    <button type="submit" class="btn btn-success btn-sm">Save</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>
    <div class="pagination">
        {% for num in page_numbers %}
        {% if num == page %}
        <span class="active">{{ num + 1 }}</span>
        {% else %}
        <a href="/?page={{ num }}">{{ num + 1 }}</a>
        {% endif %}
        {% endfor %}
    </div>
    <form method="post" action="/clear" style="margin-top: 1em;">
        <button type="submit" class="btn btn-danger">Clear Database</button>
    </form>
    {% endif %}
</div>
{% endblock %}